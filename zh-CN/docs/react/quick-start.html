<!DOCTYPE html><html lang="zh-CN" class="__variable_828a90 __variable_286f9c"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/applemusic-like-lyrics/_next/static/media/ec1a1eae803b668e-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/applemusic-like-lyrics/_next/static/media/f980ec13b5b5e554.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/applemusic-like-lyrics/_next/static/css/d16074bbfc6efd59.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/applemusic-like-lyrics/_next/static/css/bdd0743818efd36b.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/applemusic-like-lyrics/_next/static/css/ed8b89109d8eb19a.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/applemusic-like-lyrics/_next/static/css/0bd454e19bf8f659.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/applemusic-like-lyrics/_next/static/chunks/webpack-592383688adae057.js" crossorigin=""/><script src="/applemusic-like-lyrics/_next/static/chunks/fd9d1056-cc48c28d170fddc2.js" async="" crossorigin=""></script><script src="/applemusic-like-lyrics/_next/static/chunks/69-4a26034d982bfeeb.js" async="" crossorigin=""></script><script src="/applemusic-like-lyrics/_next/static/chunks/main-app-2a44a57b6d82e643.js" async="" crossorigin=""></script><script src="/applemusic-like-lyrics/_next/static/chunks/250-81d4f03450cb2827.js" async=""></script><script src="/applemusic-like-lyrics/_next/static/chunks/app/%5Blang%5D/docs/layout-28c620f26f33b3e2.js" async=""></script><title>快速入门 - React 模块 - AMLL</title><meta name="description" content="A lyric player component library aims to look similar to iPad version of Apple Music. Also with DOM, React and Vue bindings."/><link rel="icon" href="/applemusic-like-lyrics/favicon.ico"/><meta name="next-size-adjust"/><script src="/applemusic-like-lyrics/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><header class="TopBar_header__lT0lu"><a href="/applemusic-like-lyrics/zh-CN">Apple Music-like Lyrics</a><div class="TopBar_divider__5GZ4u"></div><div class="TopBar_topbarItem__z3c8F">文档<div class="TopBar_menu__IXuE2"><a href="/applemusic-like-lyrics/zh-CN/docs/core/introduction">Core 模块</a></div></div><div class="TopBar_topbarItem__z3c8F">语言<div class="TopBar_menu__IXuE2"><a href="/applemusic-like-lyrics/zh-CN">中文（简体）</a><a href="/applemusic-like-lyrics/en-US">English (US)</a></div></div><a href="https://github.com/Steve-xmh/applemusic-like-lyrics">Github</a></header><div class="layout_docsLayout__zEAo8"><div class="layout_docsSidebar__zeVKr"><ul><li><h2>core</h2><ul><li><a href="/applemusic-like-lyrics/zh-CN/docs/core/introduction">核心模块概述<!-- --> (<!-- -->introduction<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li></ul></li><li><h2>react</h2><ul><li><a href="/applemusic-like-lyrics/zh-CN/docs/react/bg-render">bgRender组件<!-- --> (<!-- -->bg-render<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li><li><a href="/applemusic-like-lyrics/zh-CN/docs/react/introduction">AMLL for React概述<!-- --> (<!-- -->introduction<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li><li><a href="/applemusic-like-lyrics/zh-CN/docs/react/lyric-player">LyricPlayer组件<!-- --> (<!-- -->lyric-player<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li><li><a href="/applemusic-like-lyrics/zh-CN/docs/react/quick-start">快速入门<!-- --> (<!-- -->quick-start<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li></ul></li><li><h2>ttml-tools</h2><ul><li><a href="/applemusic-like-lyrics/en-US/docs/ttml-tools/introduction">Editor Overview<!-- --> (<!-- -->introduction<!-- -->) (<!-- -->en-US<!-- -->)</a></li><li><a href="/applemusic-like-lyrics/zh-CN/docs/ttml-tools/introduction">编辑器概述<!-- --> (<!-- -->introduction<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li><li><a href="/applemusic-like-lyrics/en-US/docs/ttml-tools/tips">Advanced Usage and Tips for TTML Editor<!-- --> (<!-- -->tips<!-- -->) (<!-- -->en-US<!-- -->)</a></li><li><a href="/applemusic-like-lyrics/zh-CN/docs/ttml-tools/tips">高级用法以及一些小技巧<!-- --> (<!-- -->tips<!-- -->) (<!-- -->zh-CN<!-- -->)</a></li></ul></li></ul></div><div class="layout_dragHandler__rpwxS"></div><main><main><h1>快速入门</h1>
<h2>概述</h2>
<p>在本文档中，你将学习如何在一个React项目中使用AMLL核心组件。</p>
<p>快速入门文档仅包含使用AMLL的核心功能的教程。部分其他功能需要依赖bncm包。</p>
<blockquote>
<p>目前，AMLL仅提供了对core的React绑定，AMLL的其他组件并未包含在内，你可以在bncm中找到它们。未来，AMLL将提供包含AMLL播放页面其他组件的react-full。</p>
</blockquote>
<h2>准备工作</h2>
<h3>1.创建一个React项目</h3>
<p>React项目可以使用多种方式创建。本文档将使用与<a href="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">MDN React教程</a>相同的create-react-app + jsx来作为示例。
你可以参考<a href="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">MDN React教程</a>创建一个React项目。并使用例如Visual Studio Code等开发软件打开你的项目。</p>
<h3>2.使用包管理软件安装AMLL</h3>
<p>安装AMLL使用的需要的依赖（如果以下列出的依赖包没有安装的话需要自行安装）：</p>
<pre><code class="hljs language-bash">npm install @pixi/app @pixi/core @pixi/display @pixi/filter-blur @pixi/filter-bulge-pinch @pixi/filter-color-matrix @pixi/sprite jss jss-preset-default <span class="hljs-comment"># 使用 npm</span>
yarn add @pixi/app @pixi/core @pixi/display @pixi/filter-blur @pixi/filter-bulge-pinch @pixi/filter-color-matrix @pixi/sprite jss jss-preset-default <span class="hljs-comment"># 使用 yarn</span>
</code></pre>
<p>安装 React 绑定需要使用的依赖（如果以下列出的依赖包没有安装的话需要自行安装）：</p>
<pre><code class="hljs language-bash">npm install react react-dom <span class="hljs-comment"># 使用 npm</span>
yarn add react react-dom <span class="hljs-comment"># 使用 yarn</span>
</code></pre>
<p>安装本体框架：</p>
<pre><code class="hljs language-bash">npm install @applemusic-like-lyrics/react <span class="hljs-comment"># 使用 npm</span>
yarn add @applemusic-like-lyrics/react <span class="hljs-comment"># 使用 yarn</span>
</code></pre>
<p>现在，你已经具备在React中使用AMLL的必要条件</p>
<h2>开始使用</h2>
<h3>1.在React项目中使用AMLL Lyric Player</h3>
<p>Lyric Player是AMLL的核心组件之一，提供歌词的显示功能。</p>
<p>通过<code>import { LyricPlayer } from &quot;@applemusic-like-lyrics/react&quot;;</code>你可以将AMLL的Lyric Player导入到你的React项目中。</p>
<p>随后AMLL Lyric Player的React组件<code>&lt;LyricPlayer /&gt;</code>便可以使用。</p>
<p>下面是一段示例。</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LyricPlayer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@applemusic-like-lyrics/react&quot;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
	&lt; <span class="hljs-title class_">LyricPlayer</span> /&gt;
  );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>但是现在，AMLL Lyric Player还不会显示任何信息。你需要按照你的需要使用React的Props来为<code>&lt;LyricPlayer /&gt;</code>赋值，同时根据歌曲的播放逐帧调用AMLL Lyric Player才能显示歌词。</p>
<p>现在，我们对代码稍做修改，使其满足我们的要求。</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>,{ useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LyricPlayer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@applemusic-like-lyrics/react&quot;</span>;
<span class="hljs-keyword">import</span> { parseTTML } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@applemusic-like-lyrics/core&#x27;</span>;

<span class="hljs-keyword">const</span> [currentTime, setCurrentTime] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> [lyricLines, setLyricLines] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> audio = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;amll-audio&quot;</span>);<span class="hljs-comment">//获取&lt;audio&gt;元素</span>

<span class="hljs-keyword">const</span> parsedResult = <span class="hljs-title function_">parseTTML</span>(<span class="hljs-variable constant_">TTML</span>-<span class="hljs-title class_">Lyrics</span>-<span class="hljs-title class_">Text</span>);<span class="hljs-comment">//对歌词进行处理</span>
<span class="hljs-title function_">setLyricLines</span>(parsedResult);<span class="hljs-comment">//利用useState设置歌词</span>

<span class="hljs-keyword">let</span> lastTime = -<span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">frame</span> = (<span class="hljs-params">time</span>) =&gt; {
    <span class="hljs-keyword">if</span> (lastTime === -<span class="hljs-number">1</span>) {
        lastTime = time;
    }
    <span class="hljs-keyword">if</span> (!audio.<span class="hljs-property">paused</span>) {
        <span class="hljs-keyword">const</span> time = (audio.<span class="hljs-property">currentTime</span> * <span class="hljs-number">1000</span>) | <span class="hljs-number">0</span>;
        <span class="hljs-title function_">setCurrentTime</span>(time);
    }
    lastTime = time;
    <span class="hljs-title function_">requestAnimationFrame</span>(frame);<span class="hljs-comment">//逐帧调用</span>
};
<span class="hljs-title function_">requestAnimationFrame</span>(frame);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> (
	<span class="xml"><span class="hljs-tag">&lt;&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;amll-audio&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;Audio-Music-Src&quot;</span> <span class="hljs-attr">controls</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LyricPlayer</span> 
		<span class="hljs-attr">lyricLines</span>=<span class="hljs-string">{lyricLines}</span>  //<span class="hljs-attr">设置歌词</span>
		<span class="hljs-attr">currentTime</span>=<span class="hljs-string">{currentTime}//通过逐帧调用函数，设置播放时间</span>
	/&gt;</span>
	<span class="hljs-tag">&lt;/&gt;</span></span>
    );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>现在，我们创建了一个<code>&lt;audio&gt;</code>元素，id为amll-audio，用以播放歌曲。使用React中的useState来设置AMLL Lyric Player的当前播放时间。</p>
<p>定义一个frame函数，通过<code>requestAnimationFrame();</code>来逐帧调用。利用<code>setCurrentTime();</code>跟随音乐的播放来设置AMLL Lyric Player的时间，从而使AMLL Lyric Player进行歌词的演出。</p>
<p>我们还差最后一步：lyricLines的设置。lyricLines需要处理好的TTML歌词。AMLL提供了TTML歌词的处理程序，即<code>parseTTML</code>。我们需要通过<code>import { parseTTML } from &#x27;@applemusic-like-lyrics/core&#x27;;</code>来导入。利用<code>parseTTML();</code>处理歌词，并将处理好的歌词通过setLyricLines赋值给AMLL Lyric Player。</p>
<blockquote>
<p>注意：目前main分支的AMLL无法使用此方法导入parseTTML，你需要从dev分支下packages/core/src/lyric/ttml.ts导入。</p>
</blockquote>
<blockquote>
<p>标准的使用方法应为从@applemusic-like-lyrics/ttml导入而不是/core。</p>
</blockquote>
<h3>2.在React项目中使用BackgroundRender</h3>
<p>BackgroundRender是AMLL的另一个核心组件。提供了歌曲播放背景显示的功能。</p>
<blockquote>
<p>在本教程中，为了简洁易懂，将以BackgroundRender中的EplorRenderer（真流体背景）作为示例。</p>
</blockquote>
<blockquote>
<p>在最新的dev分支中，EplorRenderer也为默认的BackgroundRender</p>
</blockquote>
<p>我们需要通过</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BackgroundRender</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@applemusic-like-lyrics/react&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EplorRenderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@applemusic-like-lyrics/core&#x27;</span>;
</code></pre>
<p>来导入BackgroundRender与EplorRenderer。</p>
<p>我们将第三部分中的代码作为示例进行修改。</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>,{ useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LyricPlayer</span>, <span class="hljs-title class_">BackgroundRender</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@applemusic-like-lyrics/react&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EplorRenderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@applemusic-like-lyrics/core&#x27;</span>;
<span class="hljs-keyword">import</span> { parseTTML } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@applemusic-like-lyrics/core&#x27;</span>;

<span class="hljs-keyword">const</span> [currentTime, setCurrentTime] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> [lyricLines, setLyricLines] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> [albumUrl, setAlbumUrl] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> audio = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;amll-audio&quot;</span>);

<span class="hljs-keyword">const</span> parsedResult = <span class="hljs-title function_">parseTTML</span>(<span class="hljs-variable constant_">TTML</span>-<span class="hljs-title class_">Lyrics</span>-<span class="hljs-title class_">Text</span>);
<span class="hljs-title function_">setLyricLines</span>(parsedResult);

<span class="hljs-title function_">setAlbumUrl</span>(<span class="hljs-title class_">Album</span>-<span class="hljs-title class_">Pic</span>-<span class="hljs-title class_">Url</span>);<span class="hljs-comment">//利用useState传入专辑图url</span>

<span class="hljs-keyword">let</span> lastTime = -<span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">frame</span> = (<span class="hljs-params">time</span>) =&gt; {
    <span class="hljs-keyword">if</span> (lastTime === -<span class="hljs-number">1</span>) {
        lastTime = time;
    }
    <span class="hljs-keyword">if</span> (!audio.<span class="hljs-property">paused</span>) {
        <span class="hljs-keyword">const</span> time = (audio.<span class="hljs-property">currentTime</span> * <span class="hljs-number">1000</span>) | <span class="hljs-number">0</span>;
        <span class="hljs-title function_">setCurrentTime</span>(time);
    }
    lastTime = time;
    <span class="hljs-title function_">requestAnimationFrame</span>(frame);
};
<span class="hljs-title function_">requestAnimationFrame</span>(frame);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> (
	<span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;amll-audio&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;Audio-Music-Src&quot;</span> <span class="hljs-attr">controls</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">BackgroundRender</span>
        <span class="hljs-attr">albumImageUrl</span>=<span class="hljs-string">{albumUrl}</span> //<span class="hljs-attr">将歌曲封面图url传入</span>，<span class="hljs-attr">来生成动态背景</span>
        <span class="hljs-attr">renderer</span>=<span class="hljs-string">{EplorRenderer}</span> //<span class="hljs-attr">渲染器的选择</span>，<span class="hljs-attr">这里为EplorRenderer真流体</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LyricPlayer</span> 
        <span class="hljs-attr">lyricLines</span>=<span class="hljs-string">{lyricLines}</span> 
        <span class="hljs-attr">currentTime</span>=<span class="hljs-string">{currentTime}</span> 
    /&gt;</span>
	<span class="hljs-tag">&lt;/&gt;</span></span>
    );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>通过使用<code>&lt;BackgroundRender /&gt;</code>组件，并使用其Props进行设置，我们可以得到动态背景。</p>
<p>将专辑图的url传入<code>albumImageUrl</code>，并选择<code>EplorRenderer</code>为<code>renderer</code>，渲染器会自动处理图片，生成精美的动态背景。</p>
<h2>结语</h2>
<p>我们在本章中学习了如何快速入门AMLL。希望能帮助你更轻松地进行AMLL相关的开发。</p></main></main></div><script src="/applemusic-like-lyrics/_next/static/chunks/webpack-592383688adae057.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/applemusic-like-lyrics/_next/static/css/d16074bbfc6efd59.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/applemusic-like-lyrics/_next/static/media/ec1a1eae803b668e-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n4:HL[\"/applemusic-like-lyrics/_next/static/media/f980ec13b5b5e554.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n5:HL[\"/applemusic-like-lyrics/_next/static/css/bdd0743818efd36b.css\",\"style\",{\"crossOrigin\":\"\"}]\n6:HL[\"/applemusic-like-lyrics/_next/static/css/ed8b89109d8eb19a.css\",\"style\",{\"crossOrigin\":\"\"}]\n7:HL[\"/applemusic-like-lyrics/_next/static/css/0bd454e19bf8f659.css\",\"st"])</script><script>self.__next_f.push([1,"yle\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"8:I[7690,[],\"\"]\nb:I[5613,[],\"\"]\nf:I[1778,[],\"\"]\n11:I[5250,[\"250\",\"static/chunks/250-81d4f03450cb2827.js\",\"910\",\"static/chunks/app/%5Blang%5D/docs/layout-28c620f26f33b3e2.js\"],\"\"]\n13:I[8955,[],\"\"]\nc:[\"lang\",\"zh-CN\",\"d\"]\nd:[\"package\",\"react\",\"d\"]\ne:[\"slug\",\"quick-start\",\"d\"]\n14:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/applemusic-like-lyrics/_next/static/css/d16074bbfc6efd59.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L8\",null,{\"buildId\":\"3-o7LHyxE8Tn8JUhkc8nS\",\"assetPrefix\":\"/applemusic-like-lyrics\",\"initialCanonicalUrl\":\"/zh-CN/docs/react/quick-start\",\"initialTree\":[\"\",{\"children\":[[\"lang\",\"zh-CN\",\"d\"],{\"children\":[\"docs\",{\"children\":[[\"package\",\"react\",\"d\"],{\"children\":[[\"slug\",\"quick-start\",\"d\"],{\"children\":[\"__PAGE__?{\\\"lang\\\":\\\"zh-CN\\\",\\\"package\\\":\\\"react\\\",\\\"slug\\\":\\\"quick-start\\\"}\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"lang\",\"zh-CN\",\"d\"],{\"children\":[\"docs\",{\"children\":[[\"package\",\"react\",\"d\"],{\"children\":[[\"slug\",\"quick-start\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L9\",\"$La\",null]]},[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$c\",\"children\",\"docs\",\"children\",\"$d\",\"children\",\"$e\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/applemusic-like-lyrics/_next/static/css/0bd454e19bf8f659.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$c\",\"children\",\"docs\",\"children\",\"$d\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,\"$L10\",null]]},[null,[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"className\":\"__variable_828a90 __variable_286f9c\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"TopBar_header__lT0lu\",\"children\":[[\"$\",\"$L11\",null,{\"href\":\"/zh-CN\",\"children\":\"Apple Music-like Lyrics\"}],[\"$\",\"div\",null,{\"className\":\"TopBar_divider__5GZ4u\"}],[\"$\",\"div\",null,{\"className\":\"TopBar_topbarItem__z3c8F\",\"children\":[\"文档\",[\"$\",\"div\",null,{\"className\":\"TopBar_menu__IXuE2\",\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/core/introduction\",\"children\":\"Core 模块\"}]}]]}],[\"$\",\"div\",null,{\"className\":\"TopBar_topbarItem__z3c8F\",\"children\":[\"语言\",[\"$\",\"div\",null,{\"className\":\"TopBar_menu__IXuE2\",\"children\":[[\"$\",\"$L11\",\"lang-link-0\",{\"href\":\"/zh-CN\",\"children\":\"中文（简体）\"}],[\"$\",\"$L11\",\"lang-link-1\",{\"href\":\"/en-US\",\"children\":\"English (US)\"}]]}]]}],[\"$\",\"$L11\",null,{\"href\":\"https://github.com/Steve-xmh/applemusic-like-lyrics\",\"children\":\"Github\"}]]}],[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$c\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/applemusic-like-lyrics/_next/static/css/ed8b89109d8eb19a.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]}]}],null]]},[null,[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/applemusic-like-lyrics/_next/static/css/bdd0743818efd36b.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}],null]],\"initialHead\":[false,\"$L12\"],\"globalErrorComponent\":\"$13\",\"missingSlots\":\"$W14\"}]]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"main\",null,{\"children\":\"$L15\"}]\n12:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"快速入门 - React 模块 - AMLL\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A lyric player component library aims to look similar to iPad version of Apple Music. Also with DOM, React and Vue bindings.\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/applemusic-like-lyrics/favicon.ico\"}],[\"$\",\"meta\",\"5\",{\"name\":"])</script><script>self.__next_f.push([1,"\"next-size-adjust\"}]]\n9:null\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"h1\",null,{\"children\":\"快速入门\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"概述\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"在本文档中，你将学习如何在一个React项目中使用AMLL核心组件。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"快速入门文档仅包含使用AMLL的核心功能的教程。部分其他功能需要依赖bncm包。\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"目前，AMLL仅提供了对core的React绑定，AMLL的其他组件并未包含在内，你可以在bncm中找到它们。未来，AMLL将提供包含AMLL播放页面其他组件的react-full。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"准备工作\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"1.创建一个React项目\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"React项目可以使用多种方式创建。本文档将使用与\",[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started\",\"children\":\"MDN React教程\"}],\"相同的create-react-app + jsx来作为示例。\\n你可以参考\",[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started\",\"children\":\"MDN React教程\"}],\"创建一个React项目。并使用例如Visual Studio Code等开发软件打开你的项目。\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"2.使用包管理软件安装AMLL\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"安装AMLL使用的需要的依赖（如果以下列出的依赖包没有安装的话需要自行安装）：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-bash\",\"children\":[\"npm install @pixi/app @pixi/core @pixi/display @pixi/filter-blur @pixi/filter-bulge-pinch @pixi/filter-color-matrix @pixi/sprite jss jss-preset-default \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"# 使用 npm\"}],\"\\nyarn add @pixi/app @pixi/core @pixi/display @pixi/filter-blur @pixi/filter-bulge-pinch @pixi/filter-color-matrix @pixi/sprite jss jss-preset-default \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"# 使用 yarn\"}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"安装 React 绑定需要使用的依赖（如果以下列出的依赖包没有安装的话需要自行安装）：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-bash\",\"children\":[\"npm install react react-dom \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"# 使用 npm\"}],\"\\nyarn add react react-dom \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"# 使用 yarn\"}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"安装本体框架：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-bash\",\"children\":[\"npm install @applemusic-like-lyrics/react \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"# 使用 npm\"}],\"\\nyarn add @applemusic-like-lyrics/react \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"# 使用 yarn\"}],\"\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"现在，你已经具备在React中使用AMLL的必要条件\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"开始使用\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"1.在React项目中使用AMLL Lyric Player\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Lyric Player是AMLL的核心组件之一，提供歌词的显示功能。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"通过\",[\"$\",\"code\",null,{\"children\":\"import { LyricPlayer } from \\\"@applemusic-like-lyrics/react\\\";\"}],\"你可以将AMLL的Lyric Player导入到你的React项目中。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"随后AMLL Lyric Player的React组件\",[\"$\",\"code\",null,{\"children\":\"\u003cLyricPlayer /\u003e\"}],\"便可以使用。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"下面是一段示例。\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-jsx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"React\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"react\\\"\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"LyricPlayer\"}],\" } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"@applemusic-like-lyrics/react\\\"\"}],\";\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"App\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-params\"}],\") {\\n  \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" (\\n\\t\u003c \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"LyricPlayer\"}],\" /\u003e\\n  );\\n}\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"default\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"App\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"但是现在，AMLL Lyric Player还不会显示任何信息。你需要按照你的需要使用React的Props来为\",[\"$\",\"code\",null,{\"children\":\"\u003cLyricPlayer /\u003e\"}],\"赋值，同时根据歌曲的播放逐帧调用AMLL Lyric Player才能显示歌词。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"现在，我们对代码稍做修改，使其满足我们的要求。\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-jsx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"React\"}],\",{ useState } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"react\\\"\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"LyricPlayer\"}],\" } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"@applemusic-like-lyrics/react\\\"\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { parseTTML } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"'@applemusic-like-lyrics/core'\"}],\";\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" [currentTime, setCurrentTime] = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"useState\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\");\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" [lyricLines, setLyricLines] = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"useState\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\");\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" audio = \",[\"$\",\"span\",null,{\"className\":\"hljs-variable language_\",\"children\":\"document\"}],\".\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"getElementById\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"amll-audio\\\"\"}],\");\",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"//获取\u003caudio\u003e元素\"}],\"\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" parsedResult = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"parseTTML\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-variable constant_\",\"children\":\"TTML\"}],\"-\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Lyrics\"}],\"-\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Text\"}],\");\",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"//对歌词进行处理\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"setLyricLines\"}],\"(parsedResult);\",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"//利用useState设置歌词\"}],\"\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" lastTime = -\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"frame\"}],\" = (\",[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"time\"}],\") =\u003e {\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" (lastTime === -\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\") {\\n        lastTime = time;\\n    }\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" (!audio.\",[\"$\",\"span\",null,{\"className\":\"hljs-property\",\"children\":\"paused\"}],\") {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" time = (audio.\",[\"$\",\"span\",null,{\"className\":\"hljs-property\",\"children\":\"currentTime\"}],\" * \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1000\"}],\") | \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\";\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"setCurrentTime\"}],\"(time);\\n    }\\n    lastTime = time;\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"requestAnimationFrame\"}],\"(frame);\",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"//逐帧调用\"}],\"\\n};\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"requestAnimationFrame\"}],\"(frame);\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"App\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-params\"}],\") {\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" (\\n\\t\",[\"$\",\"span\",null,{\"className\":\"xml\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":\"\u003c\u003e\"}],\"\\n\\t\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"audio\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"id\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"amll-audio\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"src\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"Audio-Music-Src\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"controls\"}],\" /\u003e\"]}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"LyricPlayer\"}],\" \\n\\t\\t\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"lyricLines\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"{lyricLines}\"}],\"  //\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"设置歌词\"}],\"\\n\\t\\t\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"currentTime\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"{currentTime}//通过逐帧调用函数，设置播放时间\"}],\"\\n\\t/\u003e\"]}],\"\\n\\t\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":\"\u003c/\u003e\"}]]}],\"\\n    );\\n}\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"default\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"App\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"现在，我们创建了一个\",[\"$\",\"code\",null,{\"children\":\"\u003caudio\u003e\"}],\"元素，id为amll-audio，用以播放歌曲。使用React中的useState来设置AMLL Lyric Player的当前播放时间。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"定义一个frame函数，通过\",[\"$\",\"code\",null,{\"children\":\"requestAnimationFrame();\"}],\"来逐帧调用。利用\",[\"$\",\"code\",null,{\"children\":\"setCurrentTime();\"}],\"跟随音乐的播放来设置AMLL Lyric Player的时间，从而使AMLL Lyric Player进行歌词的演出。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"我们还差最后一步：lyricLines的设置。lyricLines需要处理好的TTML歌词。AMLL提供了TTML歌词的处理程序，即\",[\"$\",\"code\",null,{\"children\":\"parseTTML\"}],\"。我们需要通过\",[\"$\",\"code\",null,{\"children\":\"import { parseTTML } from '@applemusic-like-lyrics/core';\"}],\"来导入。利用\",[\"$\",\"code\",null,{\"children\":\"parseTTML();\"}],\"处理歌词，并将处理好的歌词通过setLyricLines赋值给AMLL Lyric Player。\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"注意：目前main分支的AMLL无法使用此方法导入parseTTML，你需要从dev分支下packages/core/src/lyric/ttml.ts导入。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"标准的使用方法应为从@applemusic-like-lyrics/ttml导入而不是/core。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"2.在React项目中使用BackgroundRender\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"BackgroundRender是AMLL的另一个核心组件。提供了歌曲播放背景显示的功能。\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"在本教程中，为了简洁易懂，将以BackgroundRender中的EplorRenderer（真流体背景）作为示例。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"在最新的dev分支中，EplorRenderer也为默认的BackgroundRender\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我们需要通过\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-jsx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"BackgroundRender\"}],\" } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"@applemusic-like-lyrics/react\\\"\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"EplorRenderer\"}],\" } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"'@applemusic-like-lyrics/core'\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"来导入BackgroundRender与EplorRenderer。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我们将第三部分中的代码作为示例进行修改。\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-jsx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"React\"}],\",{ useState } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"react\\\"\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"LyricPlayer\"}],\", \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"BackgroundRender\"}],\" } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"@applemusic-like-lyrics/react\\\"\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"EplorRenderer\"}],\" } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"'@applemusic-like-lyrics/core'\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"import\"}],\" { parseTTML } \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"'@applemusic-like-lyrics/core'\"}],\";\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" [currentTime, setCurrentTime] = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"useState\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\");\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" [lyricLines, setLyricLines] = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"useState\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\");\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" [albumUrl, setAlbumUrl] = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"useState\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\");\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" audio = \",[\"$\",\"span\",null,{\"className\":\"hljs-variable language_\",\"children\":\"document\"}],\".\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"getElementById\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"amll-audio\\\"\"}],\");\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" parsedResult = \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"parseTTML\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-variable constant_\",\"children\":\"TTML\"}],\"-\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Lyrics\"}],\"-\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Text\"}],\");\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"setLyricLines\"}],\"(parsedResult);\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"setAlbumUrl\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Album\"}],\"-\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Pic\"}],\"-\",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Url\"}],\");\",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"//利用useState传入专辑图url\"}],\"\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" lastTime = -\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\";\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"frame\"}],\" = (\",[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"time\"}],\") =\u003e {\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" (lastTime === -\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\") {\\n        lastTime = time;\\n    }\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" (!audio.\",[\"$\",\"span\",null,{\"className\":\"hljs-property\",\"children\":\"paused\"}],\") {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"const\"}],\" time = (audio.\",[\"$\",\"span\",null,{\"className\":\"hljs-property\",\"children\":\"currentTime\"}],\" * \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1000\"}],\") | \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\";\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"setCurrentTime\"}],\"(time);\\n    }\\n    lastTime = time;\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"requestAnimationFrame\"}],\"(frame);\\n};\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"requestAnimationFrame\"}],\"(frame);\\n\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"function\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"App\"}],\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-params\"}],\") {\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" (\\n\\t\",[\"$\",\"span\",null,{\"className\":\"xml\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":\"\u003c\u003e\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"audio\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"id\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"amll-audio\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"src\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"Audio-Music-Src\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"controls\"}],\" /\u003e\"]}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"BackgroundRender\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"albumImageUrl\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"{albumUrl}\"}],\" //\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"将歌曲封面图url传入\"}],\"，\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"来生成动态背景\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"renderer\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"{EplorRenderer}\"}],\" //\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"渲染器的选择\"}],\"，\",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"这里为EplorRenderer真流体\"}],\"\\n    /\u003e\"]}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"LyricPlayer\"}],\" \\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"lyricLines\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"{lyricLines}\"}],\" \\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-attr\",\"children\":\"currentTime\"}],\"=\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"{currentTime}\"}],\" \\n    /\u003e\"]}],\"\\n\\t\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":\"\u003c/\u003e\"}]]}],\"\\n    );\\n}\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"default\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"App\"}],\";\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"通过使用\",[\"$\",\"code\",null,{\"children\":\"\u003cBackgroundRender /\u003e\"}],\"组件，并使用其Props进行设置，我们可以得到动态背景。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"将专辑图的url传入\",[\"$\",\"code\",null,{\"children\":\"albumImageUrl\"}],\"，并选择\",[\"$\",\"code\",null,{\"children\":\"EplorRenderer\"}],\"为\",[\"$\",\"code\",null,{\"children\":\"renderer\"}],\"，渲染器会自动处理图片，生成精美的动态背景。\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"结语\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"我们在本章中学习了如何快速入门AMLL。希望能帮助你更轻松地进行AMLL相关的开发。\"}]]\n"])</script><script>self.__next_f.push([1,"10:[\"$\",\"div\",null,{\"className\":\"layout_docsLayout__zEAo8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"layout_docsSidebar__zeVKr\",\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"module-core\",{\"children\":[[\"$\",\"h2\",null,{\"children\":\"core\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"module-core-introduction\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/core/introduction\",\"children\":[\"核心模块概述\",\" (\",\"introduction\",\") (\",\"zh-CN\",\")\"]}]}]]}]]}],[\"$\",\"li\",\"module-react\",{\"children\":[[\"$\",\"h2\",null,{\"children\":\"react\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"module-react-bg-render\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/react/bg-render\",\"children\":[\"bgRender组件\",\" (\",\"bg-render\",\") (\",\"zh-CN\",\")\"]}]}],[\"$\",\"li\",\"module-react-introduction\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/react/introduction\",\"children\":[\"AMLL for React概述\",\" (\",\"introduction\",\") (\",\"zh-CN\",\")\"]}]}],[\"$\",\"li\",\"module-react-lyric-player\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/react/lyric-player\",\"children\":[\"LyricPlayer组件\",\" (\",\"lyric-player\",\") (\",\"zh-CN\",\")\"]}]}],[\"$\",\"li\",\"module-react-quick-start\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/react/quick-start\",\"children\":[\"快速入门\",\" (\",\"quick-start\",\") (\",\"zh-CN\",\")\"]}]}]]}]]}],[\"$\",\"li\",\"module-ttml-tools\",{\"children\":[[\"$\",\"h2\",null,{\"children\":\"ttml-tools\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"module-ttml-tools-introduction\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/en-US/docs/ttml-tools/introduction\",\"children\":[\"Editor Overview\",\" (\",\"introduction\",\") (\",\"en-US\",\")\"]}]}],[\"$\",\"li\",\"module-ttml-tools-introduction\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/ttml-tools/introduction\",\"children\":[\"编辑器概述\",\" (\",\"introduction\",\") (\",\"zh-CN\",\")\"]}]}],[\"$\",\"li\",\"module-ttml-tools-tips\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/en-US/docs/ttml-tools/tips\",\"children\":[\"Advanced Usage and Tips for TTML Editor\",\" (\",\"tips\",\") (\",\"en-US\",\")\"]}]}],[\"$\",\"li\",\"module-ttml-tools-tips\",{\"children\":[\"$\",\"$L11\",null,{\"href\":\"/zh-CN/docs/ttml-tools/tips\",\"children\":[\"高级用法以及一些小技巧\",\" (\",\"tips\",\") (\",\"zh-CN\",\")\"]}]}]]}]]}]]}]}],[\"$\",\"div\",null,{\"className\":\"layout_dragHandler__rpwxS\"}],[\"$\",\"main\",null,{\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$c\",\"children\",\"docs\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}]]}]\n"])</script><script>self.__next_f.push([1,""])</script></body></html>